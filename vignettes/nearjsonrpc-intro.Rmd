---
title: "nearjsonrpc: Introduction"
author: "Saw Simeon"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{nearjsonrpc: Introduction}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


# Introduction

nearjsonrpc provides small, focused wrappers around the NEAR Protocol JSON-RPC API. The goal is to
make it easy to query account state, blocks, network status, transactions and call view functions
from reproducible R scripts.

## Setup


```{r setup, include = FALSE}
# install.packages(c('httr2','jsonlite','tibble','dplyr','rlang','cli','pkgdown','testthat'))
# devtools::install()
# From GitHub
remotes::install_github("sawsimeon/nearjsonrpc")
library(nearjsonrpc)
# Or when on CRAN
# install.packages("nearjsonrpc")
```

Set the endpoint (testnet is default):

```{r endpoint, eval = TRUE}

near_set_endpoint('mainnet')

```

# Examples

## Query Acount Details and Balance

```{r account, eval = TRUE}
near_query_account("vitalik.near")
```

## List all access keys associated with a NEAR account

```{r keys, eval = TRUE}
near_get_access_keys("vitalik.near")
```

## Get Current Network Status and Node Info

```{r network, eval = TRUE}
status = near_network_status()
str(status)
```

## Get NEAR Protocol Configuration

```{r, eval = TRUE}
protocol_config = near_get_protocol_config()
str(protocol_config)
```

# Data analysis example

```{r, eval = TRUE}
library(ggplot2)
library(dplyr)
library(scales)

# Get recent validator stakes
vals <- near_get_validators()

vals %>%
  slice_head(n = 10) %>%
  ggplot(aes(x = reorder(account_id, stake_near), y = stake_near)) +
  geom_col(fill = "steelblue") +
  coord_flip() +
  scale_y_continuous(labels = comma) +   # makes stake readable with commas
  labs(
    title = "Top 10 Validators by Stake",
    x = "Validator",
    y = "Stake (NEAR)"
  ) +
  theme_minimal()

```

# Error handling and best practices

- Avoid embedding real keys or signed transactions in vignettes or tests.

# Contributing

Please see the repository on GitHub. Open issues or PRs for improvements.
